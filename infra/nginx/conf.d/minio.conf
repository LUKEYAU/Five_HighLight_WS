# S3 API
server {
  listen 80;
  server_name s3.fivecut.school.edu;

  # 讓瀏覽器直連 presigned URL PUT 大檔
  client_max_body_size 0;
  location / {
    proxy_pass http://minio:9000;
    proxy_request_buffering off;   # 大檔 PUT 穿透
    proxy_buffering off;
    # MinIO 會自己回 ETag/ExposeHeaders，我們不改
  }
}

# MinIO Console（管理後台）
server {
  listen 80;
  server_name console.s3.fivecut.school.edu;

  location / {
    proxy_pass http://minio:9001;
  }
}
